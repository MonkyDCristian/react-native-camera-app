# üì± Camera App - React Native 0.79.1

Una aplicaci√≥n de c√°mara desarrollada con React Native que funciona tanto en iOS como Android, con capacidades avanzadas de **Visi√≥n por Computadora**.

## üöÄ Configuraci√≥n del Entorno de Desarrollo ‚úÖ COMPLETA

Este proyecto est√° **completamente configurado** con **EAS Development Build** para desarrollo con librer√≠as nativas avanzadas.

### Dependencias Instaladas ‚úÖ

- **Node.js** v24.4.1
- **npm** v11.4.2 
- **React Native** 0.79.1 (compatible con Node.js 24+)
- **Expo SDK** 53.0.0 ‚úÖ
- **EAS CLI** v16.17.3 ‚úÖ
- **Java JDK** 17.0.16 (Azul Zulu)
- **Watchman** - Para monitorear cambios en archivos
- **React Native CLI** - Para comandos de React Native
- **Android Studio** con SDK configurado
- **Xcode** - Para desarrollo iOS
- **Ruby 3.4.5** y **CocoaPods**

### Dependencias de Visi√≥n por Computadora ‚úÖ

- **react-native-vision-camera** v4.7.1 - C√°mara avanzada con Frame Processors ‚úÖ
- **react-native-fast-opencv** v0.4.6 - OpenCV para algoritmos personalizados ‚úÖ
- **@shopify/react-native-skia** v2.1.1 - Renderizado de gr√°ficos din√°micos ‚úÖ
- **react-native-worklets-core** v1.6.0 - Procesamiento en tiempo real ‚úÖ
- **FastOpenCV-iOS** v1.0.4 - Dependencia nativa de OpenCV ‚úÖ

### Variables de Entorno Configuradas ‚úÖ

```bash
export JAVA_HOME=/Library/Java/JavaVirtualMachines/zulu-17.jdk/Contents/Home
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$PATH:$ANDROID_HOME/emulator
export PATH=$PATH:$ANDROID_HOME/platform-tools
export PATH="/opt/homebrew/opt/ruby/bin:$PATH"
export PATH="/opt/homebrew/lib/ruby/gems/3.4.0/bin:$PATH"
```

### Permisos Configurados ‚úÖ

**iOS (Info.plist):**
- ‚úÖ `NSCameraUsageDescription` - Acceso a c√°mara
- ‚úÖ `NSMicrophoneUsageDescription` - Acceso a micr√≥fono

**Android (AndroidManifest.xml):**
- ‚úÖ `android.permission.CAMERA` - Acceso a c√°mara
- ‚úÖ `android.permission.RECORD_AUDIO` - Acceso a micr√≥fono

## üèóÔ∏è EAS Build Configuration ‚úÖ COMPLETA

### **EAS Project Details**
- üîó **Proyecto EAS**: [@cristian.nova/react-native-camera-app](https://expo.dev/accounts/cristian.nova/projects/react-native-camera-app)
- üìã **Project ID**: `363a5a0f-c31c-4d82-9919-f44341044af1`
- ‚öôÔ∏è **EAS CLI**: v16.17.3

### **Development Builds Disponibles**

#### **‚úÖ Android Development Build**
- üì± **Estado**: Completado y funcionando
- üîó **Download**: [CameraApp-development.apk](https://expo.dev/artifacts/eas/stYFW2bVnV9zyuG4MA5gwD.apk)
- üìã **Build ID**: `d6759f59-ab46-4edf-87cb-0acca5e124ad`
- ‚è±Ô∏è **Compilado**: 27/07/2025, 7:53 PM
- üéØ **Incluye**: react-native-vision-camera, OpenCV, Skia, Frame Processors

#### **‚ùå iOS Development Build**
- üì± **Estado**: Requiere cuenta Expo pagada
- ‚ö†Ô∏è **Limitaci√≥n**: EAS Build para iOS requiere suscripci√≥n
- üîÑ **Alternativa**: Uso de simulador iOS local con `npx expo run:ios`

### **Configuraci√≥n EAS (eas.json)**
```json
{
  "cli": {
    "version": ">= 16.17.3",
    "appVersionSource": "remote"
  },
  "build": {
    "development": {
      "developmentClient": true,
      "distribution": "internal"
    },
    "preview": {
      "distribution": "internal"
    },
    "production": {
      "autoIncrement": true
    }
  }
}
```

## ‚úÖ Estado del Proyecto - DEVELOPMENT BUILD FUNCIONANDO

### **ü§ñ Android Development Build ‚úÖ FUNCIONANDO**
```bash
# Instalar APK desde el link:
# https://expo.dev/artifacts/eas/stYFW2bVnV9zyuG4MA5gwD.apk

# Iniciar servidor de desarrollo:
npx expo start --dev-client
# ‚úÖ Metro server en puerto 8081
# ‚úÖ Hot reload en tiempo real
# ‚úÖ react-native-vision-camera funcionando
# ‚úÖ Frame Processors habilitados
```

### **üçé iOS Simulador ‚úÖ FUNCIONANDO (Local)**
```bash
npx expo run:ios
# ‚úÖ Compila y ejecuta en iPhone 16 Pro Simulator
# ‚úÖ react-native-vision-camera funcionando
# ‚úÖ Frame Processors habilitados
# ‚ö†Ô∏è Solo simulador (no dispositivo f√≠sico sin cuenta pagada)
```

### **‚ùå Expo Go - NO COMPATIBLE**
```bash
# ‚ùå YA NO FUNCIONA - react-native-vision-camera requiere c√≥digo nativo
# ‚ùå Usar Development Build en su lugar
```

## üì± C√≥mo Usar la Development Build

### **üìã Paso 1: Instalar la App Android**
1. **Descargar APK**: [CameraApp-development.apk](https://expo.dev/artifacts/eas/stYFW2bVnV9zyuG4MA5gwD.apk)
2. **Instalar en Android**: Permitir instalaci√≥n de fuentes desconocidas
3. **Abrir la app**: Buscar "Camera App" en tu dispositivo

### **üìã Paso 2: Conectar al Servidor de Desarrollo**
```bash
# En tu computadora, iniciar servidor:
npx expo start --dev-client

# Aparecer√° c√≥digo QR y URL del servidor
```

### **üìã Paso 3: Conectar App con Servidor**
1. **Abrir la Development Build** instalada en Android
2. **Escanear QR code** que aparece en la terminal
3. **O introducir URL manualmente**: `exp://192.168.X.X:8081`
4. **¬°Listo!** La app cargar√° tu c√≥digo React Native

### **üîÑ Desarrollo en Tiempo Real**
- ‚úÖ **Hot Reload**: Cambios autom√°ticos al guardar archivos
- ‚úÖ **Shake to Refresh**: Agitar dispositivo para recargar
- ‚úÖ **Debug Menu**: Presionar men√∫ para opciones de desarrollo
- ‚úÖ **Console Logs**: Ver logs en la terminal donde corriste `expo start`

### **üéØ Probar Funcionalidades de C√°mara**
1. **Abrir la app** en tu dispositivo Android
2. **Navegar a "Capture Mode"** usando los botones
3. **Presionar "Seleccionar"** para abrir c√°mara
4. **¬°Usar react-native-vision-camera!** Totalmente funcional

### **Frame Processors ‚úÖ HABILITADOS**
- ‚úÖ Procesamiento de video en tiempo real
- ‚úÖ Algoritmos de OpenCV personalizados
- ‚úÖ Renderizado de m√°scaras din√°micas
- ‚úÖ Detecci√≥n de QR codes en tiempo real

## üìã Comandos √ötiles para Desarrollo

### **üöÄ Comandos Principales**
```bash
# Desarrollo con Development Build (Recomendado)
npx expo start --dev-client

# Desarrollo local iOS (simulador)
npx expo run:ios

# Limpiar cach√© si hay problemas
npx expo start --dev-client --clear

# Ver builds disponibles
eas build:list

# Crear nuevo build Android
eas build --profile development --platform android
```

### **üîß Soluci√≥n de Problemas**
```bash
# Limpiar cach√© completo
npx react-native clean

# Reinstalar pods (iOS)
cd ios && rm -rf Pods Podfile.lock && pod install && cd ..

# Reiniciar Metro
npm start -- --reset-cache

# Verificar configuraci√≥n EAS
eas whoami
```

## üéØ Pr√≥ximos Pasos de Desarrollo

### **‚úÖ Completado**
- [x] **ImageCaptureMode**: Funcional con react-native-vision-camera
- [x] **Development Build Android**: Compilado y funcionando
- [x] **Frame Processors**: Habilitados y listos
- [x] **Permisos de c√°mara**: Configurados correctamente

### **üîÑ En Desarrollo**
- [ ] **ImageTransmissionMode**: Streaming en tiempo real por WebSocket
- [ ] **ImageScannerMode**: Detecci√≥n de QR con m√°scara verde/gris
- [ ] **ImageCorrectionMode**: Procesamiento de im√°genes con OpenCV
- [ ] **Frame Processors personalizados**: Algoritmos de visi√≥n por computadora

### **üì± Testing Actual**
1. ‚úÖ **Instalar Development Build**: APK funcionando
2. ‚úÖ **Conectar con expo start --dev-client**: Hot reload activo
3. ‚úÖ **Navegar entre modos**: Selector de modos funcionando
4. ‚úÖ **Captura b√°sica**: C√°mara abre y funciona
5. üîÑ **Implementar funcionalidades avanzadas**: En progreso

---

## üéâ ¬°Development Build Completamente Funcional!

Tu setup est√° **listo para desarrollo profesional** con:
- üì± **Development Build nativo** con todas las librer√≠as
- üéØ **react-native-vision-camera** funcionando al 100%
- üî• **Hot reload** en tiempo real
- ü§ñ **Frame Processors** habilitados para OpenCV
- üõ†Ô∏è **EAS Build** configurado para futuras actualizaciones

**¬°A desarrollar algoritmos de visi√≥n por computadora! üöÄüì∏ü§ñ**

## ü§ñ Capacidades de Visi√≥n por Computadora

### **Algoritmos Disponibles**

**üîç Detecci√≥n y An√°lisis:**
- ‚úÖ **Detecci√≥n de bordes** - Canny, Sobel, Laplacian
- ‚úÖ **Detecci√≥n de contornos** - findContours, approxPolyDP
- ‚úÖ **Detecci√≥n de esquinas** - Harris corner detection
- ‚úÖ **Template matching** - B√∫squeda de patrones
- ‚úÖ **Detecci√≥n de QR codes** - Frame processor en tiempo real

**üé® Procesamiento de Imagen:**
- ‚úÖ **Filtros de imagen** - Gaussian blur, median filter
- ‚úÖ **Transformaciones** - Perspectiva, rotaci√≥n, escala
- ‚úÖ **An√°lisis de color** - Conversi√≥n de espacios de color
- ‚úÖ **Morfolog√≠a** - Erosi√≥n, dilataci√≥n, apertura, cierre

**üìê Renderizado Din√°mico:**
- ‚úÖ **M√°scaras adaptativas** - Pol√≠gonos que siguen contornos
- ‚úÖ **Overlay graphics** - Elementos superpuestos en tiempo real
- ‚úÖ **Animaciones fluidas** - 60 FPS con Skia
- ‚úÖ **Efectos visuales** - Transparencias, sombras, gradientes

### **Ejemplo de Frame Processor:**
```javascript
const detectQRFrameProcessor = (frame) => {
  'worklet';
  
  // 1. Convertir frame a OpenCV Mat
  const mat = OpenCV.frameToMat(frame);
  
  // 2. Detectar QR code
  const qrData = OpenCV.detectQRCode(mat);
  
  // 3. Calcular posici√≥n central
  const isQRCentered = checkQRPosition(qrData, frame.width, frame.height);
  
  return {
    qrDetected: qrData !== null,
    qrData: qrData,
    isCentered: isQRCentered,
    maskColor: isQRCentered ? 'green' : 'gray'
  };
};
```

## üéØ Arquitectura de la Aplicaci√≥n

### **Modos de Funcionamiento**

La aplicaci√≥n funciona como una **plataforma de desarrollo** con 4 modos especializados:

#### **1. üì∏ Capture Mode**
```typescript
// src/components/ImageCaptureMode.tsx
```
- **Funcionalidad:** Captura b√°sica de fotos y videos
- **Caracter√≠sticas:** 
  - Interfaz similar a c√°mara nativa
  - Guardado autom√°tico en galer√≠a
  - Controles de zoom y flash
  - Preview de √∫ltima captura

#### **2. üì° Transmission Mode**
```typescript
// src/components/ImageTransmissionMode.tsx
```
- **Funcionalidad:** Transmisi√≥n de frames en tiempo real
- **Caracter√≠sticas:**
  - Socket connection para streaming
  - Configuraci√≥n de calidad y FPS
  - Conexi√≥n a dispositivo externo
  - Monitor de latencia

#### **3. üîç Scanner Mode**
```typescript
// src/components/ImageScannerMode.tsx
```
- **Funcionalidad:** Detecci√≥n de QR codes con m√°scara gu√≠a
- **Caracter√≠sticas:**
  - Frame processor para detecci√≥n en tiempo real
  - M√°scara gris/verde adaptativa
  - Feedback visual cuando QR est√° centrado
  - Algoritmo de posicionamiento autom√°tico

#### **4. ‚öôÔ∏è Correction Mode**
```typescript
// src/components/ImageCorrectionMode.tsx
```
- **Funcionalidad:** Detecci√≥n + procesamiento avanzado
- **Caracter√≠sticas:**
  - Detecci√≥n de QR (hereda del Scanner Mode)
  - Procesamiento de imagen post-detecci√≥n
  - Correcci√≥n de perspectiva
  - An√°lisis y decodificaci√≥n completa

### **Estructura del Proyecto:**
```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ImageCaptureMode.tsx      # Modo captura b√°sica
‚îÇ   ‚îú‚îÄ‚îÄ ImageTransmissionMode.tsx # Modo transmisi√≥n
‚îÇ   ‚îú‚îÄ‚îÄ ImageScannerMode.tsx      # Modo scanner QR
‚îÇ   ‚îú‚îÄ‚îÄ ImageCorrectionMode.tsx   # Modo correcci√≥n avanzada
‚îÇ   ‚îî‚îÄ‚îÄ ModeSelector.tsx          # Selector de modos
‚îú‚îÄ‚îÄ processors/
‚îÇ   ‚îú‚îÄ‚îÄ QRDetectionProcessor.ts   # Frame processor QR
‚îÇ   ‚îú‚îÄ‚îÄ DocumentDetectionProcessor.ts # Detecci√≥n documentos
‚îÇ   ‚îî‚îÄ‚îÄ CorrectionProcessor.ts    # Algoritmos de correcci√≥n
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ OpenCVUtils.ts            # Utilidades OpenCV
‚îÇ   ‚îú‚îÄ‚îÄ SocketUtils.ts            # Conexiones socket
‚îÇ   ‚îî‚îÄ‚îÄ CameraUtils.ts            # Utilidades de c√°mara
‚îî‚îÄ‚îÄ types/
    ‚îú‚îÄ‚îÄ CameraTypes.ts            # Tipos de c√°mara
    ‚îî‚îÄ‚îÄ ProcessorTypes.ts         # Tipos de procesadores
```

## üì± Desarrollo con Expo Go

### **Configuraci√≥n Inicial de Expo Go**

1. **Instalar Expo Go en tu dispositivo m√≥vil:**
   - **iOS**: Descarga "Expo Go" del [App Store](https://apps.apple.com/app/expo-go/id982107779)
   - **Android**: Descarga "Expo Go" de [Google Play Store](https://play.google.com/store/apps/details?id=host.exp.exponent)

2. **Conectar tu dispositivo al proyecto:**
   ```bash
   # Iniciar servidor Expo
   npx expo start
   
   # Se abrir√° un c√≥digo QR en la terminal
   ```

3. **Escanear c√≥digo QR:**
   - **iOS**: Abre la app **C√°mara** nativa y escanea el c√≥digo QR
   - **Android**: Abre **Expo Go** y toca "Scan QR Code"

### **Comandos de Expo para Desarrollo**

```bash
# Iniciar servidor Expo (recomendado para desarrollo)
npx expo start

# Iniciar con cach√© limpio
npx expo start --clear

# Abrir autom√°ticamente en simulador iOS
npx expo start --ios

# Abrir autom√°ticamente en emulador Android
npx expo start --android

# Abrir en el navegador web
npx expo start --web

# Ver todas las opciones
npx expo start --help
```

### **Durante el desarrollo con Expo:**

Cuando tengas Expo ejecut√°ndose, puedes usar estos atajos en la terminal:

- **`r`** - Recargar la aplicaci√≥n
- **`m`** - Abrir/cerrar men√∫ de desarrollo
- **`j`** - Abrir debugger de Chrome
- **`i`** - Abrir en simulador iOS
- **`a`** - Abrir en emulador Android
- **`w`** - Abrir en navegador web
- **`?`** - Mostrar todos los comandos

### **Beneficios de Expo Go:**

‚úÖ **Desarrollo m√°s r√°pido** - Ver cambios instant√°neamente  
‚úÖ **Testing en dispositivo real** - Usar tu tel√©fono personal  
‚úÖ **Sin cables** - Conexi√≥n inal√°mbrica via WiFi  
‚úÖ **Hot reload autom√°tico** - Cambios sin recompilar  
‚úÖ **Debugging remoto** - Debug desde Chrome DevTools  
‚úÖ **Acceso a APIs nativas** - C√°mara, GPS, sensores, etc.  

## üìã Comandos Principales

### Desarrollo Diario
```bash
# OPCI√ìN 1: Desarrollo con Expo Go (Recomendado para desarrollo r√°pido)
npx expo start

# OPCI√ìN 2: Desarrollo tradicional React Native
# Terminal 1: Metro bundler
npm start

# Terminal 2: iOS
npx react-native run-ios

# Terminal 3: Android  
npx react-native run-android

# Ejecutar tests
npm test

# Verificar c√≥digo
npm run lint
```

### Soluci√≥n de Problemas
```bash
# Limpiar cach√© si hay problemas
npx react-native clean

# Reiniciar Metro con cach√© limpia
npm start -- --reset-cache

# Reiniciar Expo con cach√© limpia
npx expo start --clear

# Reiniciar ADB (Android)
adb kill-server && adb start-server

# Cerrar proceso en puerto 8081
lsof -ti:8081 | xargs kill

# Reinstalar dependencias (casos extremos)
rm -rf node_modules package-lock.json
npm install

# Reinstalar pods iOS (despu√©s de agregar dependencias nativas)
cd ios && pod install && cd ..
```

## üõ†Ô∏è Tecnolog√≠as Configuradas

- **React Native** 0.79.1
- **Expo SDK** 53.0.0 ‚úÖ
- **VisionCamera** 4.7.1 ‚úÖ
- **OpenCV** 0.4.6 ‚úÖ
- **Skia** 2.1.1 ‚úÖ
- **Worklets** 1.6.0 ‚úÖ
- **TypeScript** ‚úÖ
- **ESLint** ‚úÖ  
- **Prettier** ‚úÖ
- **Jest** para testing ‚úÖ
- **Metro** bundler ‚úÖ
- **Hermes** JavaScript engine ‚úÖ
- **Flipper** debugging ‚úÖ

## üì± Dispositivos de Prueba

### iOS Simuladores Disponibles:
- iPhone 16 Pro ‚úÖ (principal)
- iPhone 16, iPhone 16 Plus, iPhone 16 Pro Max
- iPad Air, iPad Pro, iPad mini

### Android Emuladores:
- Medium_Phone(AVD) - API 15 ‚úÖ (principal)
- Configuraci√≥n: VanillaIceCream API Level 35

### Dispositivos F√≠sicos con Expo Go:
- **iOS**: iPhone/iPad con Expo Go instalado ‚úÖ
- **Android**: Cualquier dispositivo Android con Expo Go ‚úÖ

## üîß Notas T√©cnicas

### **Problema Resuelto: Metro Server**
- **Problema inicial**: Error "Cannot read properties of undefined (reading 'handle')" con Node.js v24.4.1
- **Soluci√≥n**: Actualizaci√≥n a React Native 0.79.1
- **Estado**: ‚úÖ Completamente resuelto

### **Expo Integration**
- **Configuraci√≥n**: Expo modules instalados en proyecto React Native existente
- **Compatibilidad**: Funciona tanto con Expo Go como compilaci√≥n nativa
- **Puerto**: 8081 (predeterminado)
- **Estado**: ‚úÖ Completamente funcional

### **VisionCamera Integration**
- **Frame Processors**: ‚úÖ Habilitados con worklets-core
- **OpenCV**: ‚úÖ Algoritmos nativos disponibles
- **Permisos**: ‚úÖ iOS y Android configurados
- **Rendimiento**: ‚úÖ 60 FPS en tiempo real

### **Compatibilidad**
- React Native 0.79.1 es **completamente compatible** con Node.js v24.4.1
- Expo SDK 53.0.0 es **completamente compatible** con React Native 0.79.1
- VisionCamera 4.7.1 es **completamente compatible** con Expo
- No se requiere downgrade de Node.js
- Todas las dependencias actualizadas y funcionando

---

## üéâ ¬°Entorno 100% Funcional!

Tu setup de React Native + Expo + VisionCamera + OpenCV est√° **completamente listo** para desarrollar aplicaciones avanzadas de visi√≥n por computadora tanto en iOS como Android.

**¬°Tiempo de programar algoritmos de visi√≥n por computadora! üöÄüì∏ü§ñ**

### **Recomendaci√≥n para desarrollo:**
1. **Usa Expo Go** para desarrollo y testing r√°pido de algoritmos
2. **Usa compilaci√≥n nativa** (`npx react-native run-ios/android`) para testing final de rendimiento
3. **Prueba Frame Processors** en dispositivo real para mejor performance
